<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <title>Premium Content - Secure Reader</title>
    
    <script>(function(s){s.dataset.zone='10415259',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

    <script>(function(s){s.dataset.zone='10415258',s.src='https://nap5k.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

    <script type="text/javascript" src="//data527.click/0d310ba0dcf019dcff15/3b1bed241a/?placementName=default"></script>

    <script src="https://saviourcrimpycrimpyhem.com/55/cf/be/55cfbe12b32521ab39b9a215ae14e0a5.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Roboto', sans-serif; background: #f4f4f4; margin: 0; padding: 0; color: #333; line-height: 1.8; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.1); min-height: 2000px; }
        
        /* AD BOX STYLING */
        .ad-box { 
            background: #f0f0f0; 
            margin: 25px 0; 
            padding: 10px; 
            text-align: center; 
            border: 1px dashed #ccc; 
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }
        
        /* CONTENT STYLING */
        h1 { color: #2c3e50; font-size: 28px; margin-bottom: 20px; }
        h2 { color: #e67e22; font-size: 22px; margin-top: 30px; }
        p { font-size: 18px; margin-bottom: 20px; text-align: justify; }

        /* FLOATING TIMER (Right Side Middle) */
        .floating-panel {
            position: fixed;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
            width: 80px;
            border: 2px solid #2962FF;
        }
        .timer-display {
            font-size: 24px; font-weight: bold; color: #2962FF; margin-bottom: 5px;
        }
        .status-text { font-size: 10px; color: gray; margin-bottom: 10px; }
        
        .action-btn {
            background: #00C853; color: white; border: none; padding: 8px; 
            border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 12px;
            width: 100%; display: none;
        }
    </style>
</head>
<body>

    <script src="https://saviourcrimpycrimpyhem.com/e3/f0/68/e3f068eb0c5fa73f94b5c77b2b141f29.js"></script>

    <script type="text/javascript" src="//data527.click/0bca429982cdc5723e39/f3d84dfa5b/?placementName=default"></script>

    <div class="container">
        
        <div class="ad-box">
            <ins style="width: 728px;height:90px" data-width="728" data-height="90" class="y9ce5119f35" data-domain="//data527.click" data-affquery="/388273335727fcad9412/9ce5119f35/?placementName=Banner"><script src="//data527.click/js/responsive.js" async></script></ins>
        </div>

        <h1 id="pageTitle">Loading Premium Content...</h1>
        
        <div id="contentPart1"></div>

        <div class="ad-box">
            <script async="async" data-cfasync="false" src="https://saviourcrimpycrimpyhem.com/c88c75a76c6fd4a464ff59db12fe99a2/invoke.js"></script>
            <div id="container-c88c75a76c6fd4a464ff59db12fe99a2"></div>
        </div>

        <div id="contentPart2"></div>

        <div class="ad-box">
            <script>
            (function(uaa){
            var d = document, s = d.createElement('script'), l = d.scripts[d.scripts.length - 1];
            s.settings = uaa || {};
            s.src = "\/\/swiftvolume.com\/bwXiVlskd.G\/l\/0\/YqW\/cH\/veGmU9buNZvUYlOk_PQT\/Y\/3cMOztgUxIM\/j-AzttNhjhcmznOGDSEUy\/MRQH";
            s.async = true; s.referrerPolicy = 'no-referrer-when-downgrade';
            l.parentNode.insertBefore(s, l);
            })({})
            </script>
        </div>

        <div id="contentPart3"></div>

        <div class="ad-box">
            <script>
              atOptions = { 'key' : '1fb9d972455af3bc91e9c866cb451122', 'format' : 'iframe', 'height' : 300, 'width' : 160, 'params' : {} };
            </script>
            <script src="https://saviourcrimpycrimpyhem.com/1fb9d972455af3bc91e9c866cb451122/invoke.js"></script>
        </div>

        <div id="contentPart4"></div>

        <script>
        (function(flaj){
        var d = document, s = d.createElement('script'), l = d.scripts[d.scripts.length - 1];
        s.settings = flaj || {};
        s.src = "\/\/swiftvolume.com\/b\/XBVis.duGhl\/0GYfWHcJ\/we\/mx9dunZyULlxk\/PQTmYk3FM\/zegbxZMYTCI\/tRNvjlckz\/O\/DaE\/x-MGwj";
        s.async = true; s.referrerPolicy = 'no-referrer-when-downgrade';
        l.parentNode.insertBefore(s, l);
        })({})
        </script>

    </div>

    <div class="floating-panel">
        <div class="timer-display" id="timer">60</div>
        <div class="status-text" id="status">Reading...</div>
        <button class="action-btn" id="claimBtn" onclick="claimReward()">NEXT ></button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBXOBu6fmbco27_ugn9pFg2XQ-TaIeNRpY",
            authDomain: "apknixy-bc9ee.firebaseapp.com",
            projectId: "apknixy-bc9ee",
            storageBucket: "apknixy-bc9ee.firebasestorage.app",
            messagingSenderId: "99276264960",
            appId: "1:99276264960:web:a4f28913305288544e2ae5"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // 1. GET TASK ID
        const urlParams = new URLSearchParams(window.location.search);
        const taskId = parseInt(urlParams.get('id')) || 1;
        const isAuto = urlParams.get('auto') === 'true';
        let timeLeft = 60;
        let currentUser = null;

        // 2. GENERATE CONTENT BASED ON ID (1000 Unique Pages Logic)
        const topics = [
            { title: "High-Yield Investment Strategies for 2026", cat: "Finance" },
            { title: "The Future of AI in Healthcare", cat: "Tech" },
            { title: "Top 10 Crypto Currencies to Watch", cat: "Crypto" },
            { title: "Understanding Term Life Insurance", cat: "Insurance" },
            { title: "Home Remedies for Better Sleep", cat: "Health" }
        ];

        // Paragraph Database (Mix & Match)
        const paragraphs = [
            "In the rapidly evolving landscape of the global economy, understanding the fundamental principles of this sector is crucial for success. Experts suggest that diversification is key to maintaining a stable portfolio.",
            "Technology is advancing at an unprecedented rate. From machine learning algorithms to quantum computing, the tools available today were unimaginable just a decade ago. This shift creates new opportunities for professionals.",
            "Security and privacy have become paramount concerns. With the rise of digital transactions, ensuring that your data remains protected is more important than ever. Implementing robust encryption standards is the first step.",
            "Market trends indicate a significant bullish movement in this sector. Analysts predict that this growth will sustain over the next few quarters, driven by increased consumer demand and technological innovation.",
            "However, risks remain. Regulatory changes and geopolitical instability can impact performance. It is essential to stay informed and adapt your strategies accordingly to mitigate potential losses."
        ];

        function generateContent(id) {
            // Select Topic based on ID (Loop through 5 topics)
            const topicIndex = (id - 1) % topics.length;
            const currentTopic = topics[topicIndex];
            
            document.getElementById('pageTitle').innerText = `Task ${id}: ${currentTopic.title}`;
            
            // Generate Long Content (Repeating paragraphs with slight variations)
            // Hum paragraphs ko repeat karke 1000 words banayenge
            let content1 = `<h2>Introduction to ${currentTopic.cat}</h2><p>${paragraphs[0]} ${paragraphs[1]} ${paragraphs[2]}</p><p>${paragraphs[3]}</p>`;
            let content2 = `<h2>Key Analysis</h2><p>${paragraphs[4]} ${paragraphs[0]} ${paragraphs[1]}</p><p>${paragraphs[2]} ${paragraphs[3]}</p>`;
            let content3 = `<h2>Future Outlook</h2><p>${paragraphs[1]} ${paragraphs[4]} ${paragraphs[0]}</p><p>${paragraphs[3]} ${paragraphs[2]}</p>`;
            let content4 = `<h2>Conclusion</h2><p>${paragraphs[2]} ${paragraphs[3]} ${paragraphs[4]}</p><p>Thank you for reading Article #${id}. Proceed to earn your reward.</p>`;

            document.getElementById('contentPart1').innerHTML = content1;
            document.getElementById('contentPart2').innerHTML = content2;
            document.getElementById('contentPart3').innerHTML = content3;
            document.getElementById('contentPart4').innerHTML = content4;
        }

        // 3. AUTH & START
        auth.onAuthStateChanged(user => {
            if (user) {
                currentUser = user;
                generateContent(taskId);
                startSession();
            } else {
                window.location.href = "index.html";
            }
        });

        // 4. WAKE LOCK & TIMER
        async function startSession() {
            try { if ('wakeLock' in navigator) await navigator.wakeLock.request('screen'); } catch(e){}

            const timerInt = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                
                // AUTO SCROLL (Slowly down)
                if(isAuto) {
                    window.scrollBy(0, 3); // Thoda tez scroll taaki ad view count ho
                }

                if (timeLeft <= 0) {
                    clearInterval(timerInt);
                    enableClaim();
                }
            }, 1000);
        }

        function enableClaim() {
            document.getElementById('timer').style.display = 'none';
            document.getElementById('status').innerText = "Completed!";
            document.getElementById('claimBtn').style.display = 'block';
            
            if(isAuto) {
                document.getElementById('claimBtn').innerText = "Processing...";
                setTimeout(claimReward, 2000);
            }
        }

        // 5. CLAIM REWARD (SECURE API)
        async function claimReward() {
            try {
                const res = await fetch('/api/reward', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ uid: currentUser.uid, taskId: taskId })
                });

                const data = await res.json();
                
                if(data.success) {
                    // Play Coin Sound
                    let audio = new Audio('https://actions.google.com/sounds/v1/cartoon/clown_horn.ogg'); 
                    audio.play().catch(e=>{});

                    if(taskId >= 1000) {
                        alert("Daily Limit Reached!");
                        window.location.href = "index.html";
                    } else {
                        // Load Next Task
                        window.location.href = `task.html?id=${taskId + 1}&auto=${isAuto}`;
                    }
                } else {
                    alert(data.error);
                    // Agar "Too Fast" error aaye to wapis dashboard
                    if(data.error.includes("fast")) window.location.href = "index.html";
                }
            } catch (err) {
                console.log(err);
            }
        }
    </script>
</body>
</html>
